<Window x:Class="TwitchWatcher.WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Twitch Channels" Height="520" Width="820"
        WindowStartupLocation="CenterScreen"
        WindowStyle="SingleBorderWindow"
        Background="#1E1F22"
        Icon="/Assets/Icons/stream (1).ico">


    <DockPanel LastChildFill="True" Margin="16">

        <!-- Top bar -->
        <Border DockPanel.Dock="Top" CornerRadius="12" Padding="14"
            Background="{StaticResource Brush.PanelBg}" BorderBrush="{StaticResource Brush.Border}" BorderThickness="1" >
            <DockPanel>
                <Image Source="/Assets/Icons/stream (1).ico" 
                       Width="48" Height="48"
                       VerticalAlignment="Center"
                       Margin="10,0"/>
                <TextBlock Text="Twitch Watcher"
                   FontSize="18" FontWeight="SemiBold"
                   Foreground="{StaticResource Brush.Text}" VerticalAlignment="Center"
                   DockPanel.Dock="Left"
                   Margin="0,0,0,0"/>
                <StackPanel Orientation="Horizontal"
                            DockPanel.Dock="Right" 
                            HorizontalAlignment="Right"
                            Height="34">
                    <!-- Input with placeholder overlay -->
                    <Grid Width="260" Margin="0,0,22,0">
                        <TextBox x:Name="LoginTextBox"
                                    Text="{Binding NewLogin, UpdateSourceTrigger=PropertyChanged}"
                                    ToolTip="Enter channel login (e.g., shroud)"
                                    Margin="20,0,0,0"/>
                        <TextBlock Text="Enter new channel…"
                       Foreground="{StaticResource Brush.TextDim}"
                       Margin="40,0,0,0"
                       VerticalAlignment="Center"
                       IsHitTestVisible="False">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Text, ElementName=LoginTextBox}" Value="">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Text, ElementName=LoginTextBox}" Value="{x:Null}">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </Grid>

                    <Button Content="Add"    Command="{Binding AddCommand}"   Style="{StaticResource AccentButton}" Margin="0,0,8,0"/>
                    <Button Content="Remove" Command="{Binding RemoveCommand}" Style="{StaticResource DangerButton}" Margin="0,0,8,0"/>
                    <!--Button Content="Save"   Command="{Binding SaveCommand}"   Style="{StaticResource SuccessButton}"/-->
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Grid panel -->
        <Border Margin="0,12,0,0" CornerRadius="12"
             BorderBrush="{StaticResource Brush.Border}" BorderThickness="1"
            SnapsToDevicePixels="True">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,2">
                    <GradientStop Color="#1E1F22" Offset="0"/>
                    <GradientStop Color="#3A3B3F" Offset="1"/> 
                </LinearGradientBrush>
            </Border.Background>
            <DataGrid ItemsSource="{Binding Channels}" 
                      SelectedItem="{Binding Selected}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False" 
                      HeadersVisibility="Column"
                      RowHeight="48" 
                      GridLinesVisibility="None" 
                      Background="Transparent"
                      BorderThickness="0">
                    <DataGrid.Columns>
                        <DataGridTemplateColumn Header="Preview" Width="auto">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Grid Width="36" Height="36">
                                        <Border CornerRadius="18" Background="#222"/>
                                        <Image Source="{Binding ImageUrl}"
                                                Stretch="Fill"
                                                Width="36" Height="36">
                                            <Image.Clip>
                                                <RectangleGeometry RadiusX="18" RadiusY="18" Rect="0,0,36,36"/>
                                            </Image.Clip>
                                        </Image>
                                    </Grid>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTextColumn Header="Channel" Binding="{Binding DisplayName}" Width="auto">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                    <Setter Property="Padding" Value="0,0"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTemplateColumn Header="Status" Width="auto">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <!-- Dot color by state -->
                                        <Ellipse>
                                            <Ellipse.Style>
                                                <Style TargetType="Ellipse" BasedOn="{StaticResource StateDot}">
                                                    <Setter Property="Fill" Value="Gray"/>
                                                <Setter Property="Margin" Value="30,0,0,0"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding State}" Value="Live">
                                                        <Setter Property="Fill" Value="{StaticResource Brush.Success}"/>
                                                    </DataTrigger>
                                                        <DataTrigger Binding="{Binding State}" Value="Offline">
                                                            <Setter Property="Fill" Value="{StaticResource Brush.Danger}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Ellipse.Style>
                                        </Ellipse>
                                        <!--TextBlock Text="{Binding State}" Foreground="{StaticResource Brush.TextDim}" Padding="10,0"/-->
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    

                    <DataGridTextColumn Header="Viewers" Binding="{Binding ViewerCount}" Width="auto">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Padding" Value="0,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>



                    <DataGridTextColumn Header="Title" Binding="{Binding Title}" Width="*">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Padding" Value="20,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    </DataGrid.Columns>
            </DataGrid>
        </Border>

    </DockPanel>
</Window>